'use strict';const _0x4e45ca=_0x8870;(function(_0x3f5ebe,_0x245bad){const _0x3895b9=_0x8870,_0x35b5d9=_0x3f5ebe();while(!![]){try{const _0x3c9c14=parseInt(_0x3895b9(0x24e))/0x1*(parseInt(_0x3895b9(0x1f3))/0x2)+parseInt(_0x3895b9(0x1f6))/0x3+-parseInt(_0x3895b9(0x245))/0x4*(parseInt(_0x3895b9(0x221))/0x5)+-parseInt(_0x3895b9(0x1fd))/0x6+-parseInt(_0x3895b9(0x239))/0x7*(-parseInt(_0x3895b9(0x265))/0x8)+-parseInt(_0x3895b9(0x207))/0x9*(-parseInt(_0x3895b9(0x256))/0xa)+parseInt(_0x3895b9(0x200))/0xb;if(_0x3c9c14===_0x245bad)break;else _0x35b5d9['push'](_0x35b5d9['shift']());}catch(_0x21c52e){_0x35b5d9['push'](_0x35b5d9['shift']());}}}(_0x3c20,0x5b11a));function _0x3c20(){const _0x285573=['lI4VAw50zwDYyq','q2XVy2Ttzxj2Aq','zcbMB3iGChjVza','zgvIDwC','AwXPDgf0B3i','mJKWnJy1oe1nEvbovq','DMfSAwrHDgLVBG','zxHLy3v0zuHPza','mZu5otq1m1zkBxzkCq','BgLKyxrPB24TCW','BgLJzw5Zzsb2yq','zgvUt3bLCMf0Aq','CM9UBwvUDa','DMLJzq','B3iGBgLJzw5Zzq','mJG3mtu0oxfbDvPfEq','DMLKzxiGzM91BG','rv9wquXjrefusq','zxjHDgLVBG','yxrLlG','tgLJzw5ZzsbJyq','BgLKyxrPB24GyW','zguGAw4Gzgv2zq','C3qGzw52AxjVBG','u3vJy2vLzgvK','BgLJzw5Zzs12yq','u2vYDMLJzuzHyW','B21WBgv0zwqU','zw5ZzvnLCNzPyW','AwrHDg9Yrw52Aq','tM8GBgLJzw5Zzq','DMLKzxjZ','zgLKyxrL','BgLJzw5ZzunHBG','B25jBNn0yw5Jzq','B3iGzgvTBYbTBW','D2fYBG','BMfTzq','DMfSAwrHDgvmAq','tgLJzw5ZzvzHBa','DgLVBNmVz3vTCG','mtG1ody4nwXJu0HfDa','lI4VzxjYB3jZ','C2vYDMLJzuzHyW','BgLKyxrVCI1Zzq','zw52AxjVBM1LBG','Aw5PDeXPy2vUCW','Cg1LBNqTzw52Aq','CNzPy2uTDMfSAq','zxj0Eq','DMvYAwz5tgLJzq','BNnLCW','z3vTCM9Hza','zs1TAxnZAw5N','AwrLBNrPzMLLCG','BNnL','BgvUz3rO','yw10ExbLCW','zgXLlwrLDMvSBW','qhjZlxrLy2GTAa','Axnezw1Vtw9Kzq','CM9YoMXPy2vUCW','AxnwzxjPzMLLza','x19TzxrHzgf0yq','ywLSzwqGzM9Yia','nJq3nxbNEKnHvW','uNvUBMLUzW','t05FrKfjteve','igXPy2vUC2vZlG','zgf0zs1SAwnLBG','r3vTCM9HzcbSAq','BgLJzw5ZzvbYBW','sw5Qzwn0ywjSzq','tg9Nz2vY','zgvMAw5LuhjVCa','y2XVy2S','qxbWCM92Aw5Nia','ngvKv1rIyW','vevtva','AwXPDgf0B3jtzq','C3rHDhvZ','ChvZAa','y2vUC2uGy2HLyW','zwrqCM9KDwn0','zxj2AwnLlwHHBG','AwnLBNnLihbYBW','ndm5yu9hzw1n','AgfUzgXLuhjVza','BM93rgf0zq','AYbMywLSzwqU','x19LC01VzhvSzq','BgLKyxrPB24GzG','BwvUDa','CM9UBwvUDc1Kzq','mtbVDg93CgC','Aw5Nrw52AxjVBG','DhnSAwi','BMrPzgf0zsbPCW','tM8GDMfSAwqGBa','ig1PC3nPBMCGzG','zxjYB3i','rMfPBgvK','BwvUDcbMB3iG','lNnLCNzPy2u','zs5Zzxj2AwnL','sw5ZDgfUy2vjCW','y2vUC2u','uK9sx0Xjq0vouW','u1rbr0LorW','nZeYs0rhCNjN','ChjVzhvJDgLVBG','teLdru5trv9fuG','Bg9WBwvUDc90zq','AwrHDgLVBLnLCG','Bg9Nz2vY','DwiVBMvZDgPZlq','Bg9N','mtG2mNzbuKDuwG','z3vTCM9HzeXPyW','zs1Jyw5KAwrHDa','mJC1nJqWrLnzr09j','Dwn0Aw9Urw52Aq'];_0x3c20=function(){return _0x285573;};return _0x3c20();}function _0x8870(_0x50ecb8,_0x36c173){const _0x3c20d5=_0x3c20();return _0x8870=function(_0x887028,_0x8c6d7c){_0x887028=_0x887028-0x1f2;let _0x159fc0=_0x3c20d5[_0x887028];if(_0x8870['MTcqqp']===undefined){var _0x179047=function(_0x798bf){const _0x5742bb='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3d0c3e='',_0x2a5b81='';for(let _0x118988=0x0,_0x4c91d4,_0x991252,_0x4f3c08=0x0;_0x991252=_0x798bf['charAt'](_0x4f3c08++);~_0x991252&&(_0x4c91d4=_0x118988%0x4?_0x4c91d4*0x40+_0x991252:_0x991252,_0x118988++%0x4)?_0x3d0c3e+=String['fromCharCode'](0xff&_0x4c91d4>>(-0x2*_0x118988&0x6)):0x0){_0x991252=_0x5742bb['indexOf'](_0x991252);}for(let _0x8ba764=0x0,_0x514661=_0x3d0c3e['length'];_0x8ba764<_0x514661;_0x8ba764++){_0x2a5b81+='%'+('00'+_0x3d0c3e['charCodeAt'](_0x8ba764)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2a5b81);};_0x8870['dYqpZW']=_0x179047,_0x50ecb8=arguments,_0x8870['MTcqqp']=!![];}const _0x36850d=_0x3c20d5[0x0],_0xe556e=_0x887028+_0x36850d,_0x426fcd=_0x50ecb8[_0xe556e];return!_0x426fcd?(_0x159fc0=_0x8870['dYqpZW'](_0x159fc0),_0x50ecb8[_0xe556e]=_0x159fc0):_0x159fc0=_0x426fcd,_0x159fc0;},_0x8870(_0x50ecb8,_0x36c173);}var LicenseValidationService_1;Object[_0x4e45ca(0x242)+_0x4e45ca(0x229)](exports,_0x4e45ca(0x252),{'value':!![]}),exports['LicenseVal'+_0x4e45ca(0x269)+_0x4e45ca(0x205)]=void 0x0;const tslib_1=require(_0x4e45ca(0x258)),common_1=require('@nestjs/co'+'mmon'),nestjs_clock_1=require(_0x4e45ca(0x233)+_0x4e45ca(0x26b)+_0x4e45ca(0x243)),nestjs_service_operation_1=require(_0x4e45ca(0x233)+_0x4e45ca(0x26b)+'service-op'+_0x4e45ca(0x20a)),errors_1=require(_0x4e45ca(0x222)),gumroad_license_service_1=require(_0x4e45ca(0x1f8)+_0x4e45ca(0x220)+'oad-licens'+_0x4e45ca(0x260)),license_validator_service_1=require('../license'+'-validator'+_0x4e45ca(0x25f));let LicenseValidationService=LicenseValidationService_1=class LicenseValidationService{[_0x4e45ca(0x1f4)+_0x4e45ca(0x214)+'e'];[_0x4e45ca(0x223)+_0x4e45ca(0x1fc)];['clock'];[_0x4e45ca(0x26a)]=new common_1[(_0x4e45ca(0x241))](LicenseValidationService_1[_0x4e45ca(0x21d)]);constructor(_0x798bf,_0x5742bb,_0x3d0c3e){const _0xf5e4e=_0x4e45ca;this[_0xf5e4e(0x1f4)+_0xf5e4e(0x214)+'e']=_0x798bf,this[_0xf5e4e(0x223)+_0xf5e4e(0x1fc)]=_0x5742bb,this[_0xf5e4e(0x243)]=_0x3d0c3e;}async[_0x4e45ca(0x21e)+'censes'](_0x2a5b81){const _0x2ceb1b=_0x4e45ca;return await this[_0x2ceb1b(0x223)+_0x2ceb1b(0x1fc)][_0x2ceb1b(0x1ff)+'denOperati'+'on'](_0x2ceb1b(0x211)+_0x2ceb1b(0x201)+'ervice-val'+'idate-lice'+_0x2ceb1b(0x22b),async()=>{const _0x521998=_0x2ceb1b;if(_0x2a5b81[_0x521998(0x230)]===0x0)return this[_0x521998(0x26a)][_0x521998(0x25c)](_0x521998(0x216)+'s\x20to\x20valid'+_0x521998(0x20b)),[];this[_0x521998(0x26a)]['log']('Validating'+'\x20'+_0x2a5b81[_0x521998(0x230)]+(_0x521998(0x23c)+'..'));const _0x118988=[];for(const _0x4c91d4 of _0x2a5b81){const _0x991252=_0x4c91d4[_0x521998(0x219)+_0x521998(0x218)];if(!_0x991252){this[_0x521998(0x26a)]['debug'](_0x521998(0x20c)+_0x521998(0x259)+'\x20missing\x20f'+_0x521998(0x206)+':\x20'+_0x4c91d4[_0x521998(0x22e)]),this[_0x521998(0x26a)]['error'](errors_1[_0x521998(0x267)+_0x521998(0x263)+_0x521998(0x209)+_0x521998(0x23b)]);continue;}try{const _0x4f3c08=await this[_0x521998(0x21e)+_0x521998(0x262)](_0x4c91d4);_0x4f3c08&&_0x118988[_0x521998(0x249)](_0x4c91d4);}catch(_0x8ba764){this[_0x521998(0x26a)][_0x521998(0x1fb)]('License\x20va'+_0x521998(0x253)+_0x521998(0x238)+'license:\x20'+_0x4c91d4['identifier']),this[_0x521998(0x26a)][_0x521998(0x25c)](errors_1[_0x521998(0x267)+'ROR_LICENS'+_0x521998(0x209)+'ON_FAILED']),this[_0x521998(0x26a)]['debug'](_0x8ba764);}}return this['logger'][_0x521998(0x1f2)]('License\x20va'+_0x521998(0x20d)+_0x521998(0x213)),_0x118988;});}async['validateLi'+_0x4e45ca(0x262)](_0x514661){const _0x6fb4d4=_0x4e45ca;return await this[_0x6fb4d4(0x223)+_0x6fb4d4(0x1fc)][_0x6fb4d4(0x1ff)+_0x6fb4d4(0x203)+'on'](_0x6fb4d4(0x211)+_0x6fb4d4(0x224)+_0x6fb4d4(0x228)+_0x6fb4d4(0x23d)+'se',async()=>{const _0x31865f=_0x6fb4d4;if(_0x514661[_0x31865f(0x234)]&&(_0x514661[_0x31865f(0x225)+'t']===license_validator_service_1['LicenseVal'+_0x31865f(0x215)+_0x31865f(0x204)]['DEVELOPMEN'+'T']||_0x514661[_0x31865f(0x225)+'t']===license_validator_service_1['LicenseVal'+_0x31865f(0x215)+'ronment'][_0x31865f(0x246)]))return this[_0x31865f(0x26a)]['debug'](_0x31865f(0x244)+_0x31865f(0x202)+'lidation\x20f'+_0x31865f(0x21b)+_0x31865f(0x20e)+_0x31865f(0x268)+_0x31865f(0x20f)+_0x31865f(0x25e)+_0x514661['identifier']),_0x514661[_0x31865f(0x1fe)+_0x31865f(0x210)](this[_0x31865f(0x243)][_0x31865f(0x250)]()),_0x514661;const _0x4fa85c=_0x514661[_0x31865f(0x219)+'didate'];if(!_0x4fa85c||!_0x4fa85c[_0x31865f(0x23f)+_0x31865f(0x217)]||_0x4fa85c[_0x31865f(0x23f)+_0x31865f(0x217)][_0x31865f(0x230)]===0x0){this[_0x31865f(0x26a)][_0x31865f(0x21c)](_0x31865f(0x20c)+_0x31865f(0x259)+_0x31865f(0x25b)+_0x31865f(0x206)+':\x20'+_0x514661[_0x31865f(0x22e)]);throw new Error('license-er'+_0x31865f(0x235)+_0x31865f(0x1f5)+_0x31865f(0x22d));}for(const _0x477911 of _0x4fa85c['licensePro'+_0x31865f(0x217)]){if(_0x477911[_0x31865f(0x21d)]===_0x31865f(0x22c)){_0x514661['provider']=_0x477911['name'],_0x514661[_0x31865f(0x226)+_0x31865f(0x24b)]({'providerId':_0x477911['id'],'marketplace':_0x477911['name']});try{const _0x32b35f=await this[_0x31865f(0x1f4)+_0x31865f(0x214)+'e'][_0x31865f(0x22a)+_0x31865f(0x22f)](_0x514661);if(!_0x32b35f)return _0x514661[_0x31865f(0x1fe)+_0x31865f(0x25d)](this['clock'][_0x31865f(0x250)]()),_0x514661;if(_0x32b35f['environmen'+'t']===license_validator_service_1[_0x31865f(0x21f)+_0x31865f(0x215)+_0x31865f(0x204)][_0x31865f(0x264)])return await this['handleStag'+_0x31865f(0x257)+_0x31865f(0x254)](_0x32b35f);if(_0x514661[_0x31865f(0x225)+'t']===license_validator_service_1['LicenseVal'+_0x31865f(0x215)+'ronment']['PRODUCTION'])return await this[_0x31865f(0x24f)+_0x31865f(0x1f7)+'ronment'](_0x32b35f);}catch(_0x20517a){return this[_0x31865f(0x26a)]['warn'](_0x31865f(0x23e)+_0x31865f(0x24a)+_0x31865f(0x251)),this['logger']['warn'](_0x20517a),_0x514661;}}}return this[_0x31865f(0x26a)][_0x31865f(0x21c)](_0x31865f(0x25a)+_0x31865f(0x24d)+_0x31865f(0x208)+_0x31865f(0x1fa)+'uct:\x20'+_0x4fa85c['id']),_0x514661;});}async['handleStag'+'ingEnviron'+_0x4e45ca(0x254)](_0x3a1288){const _0x2a607f=_0x4e45ca;return await this['serviceFac'+'ilitator'][_0x2a607f(0x1ff)+_0x2a607f(0x203)+'on'](_0x2a607f(0x211)+_0x2a607f(0x201)+_0x2a607f(0x24c)+_0x2a607f(0x232)+_0x2a607f(0x227)+_0x2a607f(0x255)+'mo-mode',async()=>{const _0xbb6697=_0x2a607f;if(_0x3a1288[_0xbb6697(0x248)][_0xbb6697(0x236)]===!![])return _0x3a1288[_0xbb6697(0x1fe)+_0xbb6697(0x210)](this[_0xbb6697(0x243)]['nowDate']()),_0x3a1288;return _0x3a1288[_0xbb6697(0x1fe)+_0xbb6697(0x25d)](this[_0xbb6697(0x243)][_0xbb6697(0x250)]()),this[_0xbb6697(0x26a)][_0xbb6697(0x25c)](errors_1['LICENSE_ER'+_0xbb6697(0x263)+'E_VALIDATI'+_0xbb6697(0x23b)]),_0x3a1288;});}async['handleProd'+'uctionEnvi'+_0x4e45ca(0x204)](_0x291f7e){const _0x4d111a=_0x4e45ca;return await this['serviceFac'+_0x4d111a(0x1fc)]['executeHid'+_0x4d111a(0x203)+'on'](_0x4d111a(0x211)+_0x4d111a(0x201)+_0x4d111a(0x24c)+'dle-develo'+'pment-envi'+_0x4d111a(0x255)+'mo-mode',async()=>{const _0x1fe509=_0x4d111a;if(_0x291f7e[_0x1fe509(0x248)][_0x1fe509(0x236)]===!![]&&_0x291f7e[_0x1fe509(0x266)+_0x1fe509(0x261)+_0x1fe509(0x23a)]===![])return _0x291f7e[_0x1fe509(0x1fe)+_0x1fe509(0x210)](this[_0x1fe509(0x243)][_0x1fe509(0x250)]()),_0x291f7e;if(_0x291f7e['status'][_0x1fe509(0x236)]===!![]&&_0x291f7e[_0x1fe509(0x266)+_0x1fe509(0x261)+_0x1fe509(0x23a)]===!![]&&_0x291f7e['isProducti'+_0x1fe509(0x21a)]===!![])return _0x291f7e[_0x1fe509(0x1fe)+_0x1fe509(0x210)](this[_0x1fe509(0x243)]['nowDate']()),_0x291f7e;return _0x291f7e[_0x1fe509(0x1fe)+_0x1fe509(0x25d)](this[_0x1fe509(0x243)][_0x1fe509(0x250)]()),this[_0x1fe509(0x26a)][_0x1fe509(0x25c)](errors_1['LICENSE_ER'+_0x1fe509(0x263)+_0x1fe509(0x209)+_0x1fe509(0x23b)]),_0x291f7e;});}};exports['LicenseVal'+_0x4e45ca(0x269)+_0x4e45ca(0x205)]=LicenseValidationService,exports['LicenseVal'+'idationSer'+'vice']=LicenseValidationService=LicenseValidationService_1=tslib_1['__decorate']([(0x0,common_1[_0x4e45ca(0x240)])(),tslib_1[_0x4e45ca(0x237)]('design:par'+_0x4e45ca(0x231),[gumroad_license_service_1['GumroadLic'+_0x4e45ca(0x214)+'e'],nestjs_service_operation_1[_0x4e45ca(0x212)+_0x4e45ca(0x247)+'rvice'],nestjs_clock_1[_0x4e45ca(0x1f9)+'ce']])],LicenseValidationService);